function moveAndLookAt(e,t,n,i){i||(i={duration:3e3});var o=(new THREE.Vector3).copy(e.position),r=(new THREE.Euler).copy(e.rotation);e.position.set(t.x,t.y,t.z),e.lookAt(n);var a=(new THREE.Euler).copy(e.rotation);e.position.set(o.x,o.y,o.z),e.rotation.set(r.x,r.y,r.z),tweenRotate=new TWEEN.Tween(e.position).to({x:t.x,y:t.y,z:t.z},i.duration).start(),function(){var t=e.quaternion,n=(new THREE.Quaternion).setFromEuler(a),o=new THREE.Quaternion;e.quaternion=o;var r={t:0};new TWEEN.Tween(r).to({t:.3},i.duration).onUpdate(function(){THREE.Quaternion.slerp(t,n,o,r.t),e.quaternion.set(o.x,o.y,o.z,o.w)}).start()}.call(this)}THREE.AnimationMixer=function(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1},THREE.AnimationMixer.prototype={constructor:THREE.AnimationMixer,clipAction:function(e,t){var n,i=(t||this._root).uuid,o="string"==typeof e?e:e.name,r=e!==o?e:null,a=this._actionsByClip[o];if(void 0!==a){var s=a.actionByRoot[i];if(void 0!==s)return s;if(n=a.knownActions[0],r=n._clip,e!==o&&e!==r)throw new Error("Different clips with the same name detected!")}if(null===r)return null;var c=new THREE.AnimationMixer._Action(this,r,t);return this._bindAction(c,n),this._addInactiveAction(c,o,i),c},existingAction:function(e,t){var n=(t||this._root).uuid,i="string"==typeof e?e:e.name,o=this._actionsByClip[i];return void 0!==o?o.actionByRoot[n]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(o=0;o!==t;++o)e[o].reset();for(var o=0;o!==i;++o)n[o].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,o=Math.sign(e),r=this._accuIndex^=1,a=0;a!==n;++a){var s=t[a];s.enabled&&s._update(i,e,o,r)}for(var c=this._bindings,h=this._nActiveBindings,a=0;a!==h;++a)c[a].apply(r);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.name,i=this._actionsByClip,o=i[n];if(void 0!==o){for(var r=o.knownActions,a=0,s=r.length;a!==s;++a){var c=r[a];this._deactivateAction(c);var h=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=h,t[h]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var o=n[i].actionByRoot[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var r=this._bindingsByRootAndName[t];if(void 0!==r)for(var a in r){var s=r[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},THREE.EventDispatcher.prototype.apply(THREE.AnimationMixer.prototype),THREE.AnimationMixer._Action=function(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,o=i.length,r=new Array(o),a={endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},s=0;s!==o;++s){var c=i[s].createInterpolant(null);r[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=r,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=THREE.LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0},THREE.AnimationMixer._Action.prototype={constructor:THREE.AnimationMixer._Action,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){this._startTime;return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){this._mixer;if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,o=e._clip.duration,r=o/i,a=i/o;e.warp(1,r,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._currentTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,o=i.time,r=this._timeScaleInterpolant,a=this.timeScale;null===r&&(r=i._lendControlInterpolant(),this._timeScaleInterpolant=r);var s=r.parameterPositions,c=r.sampleValues;return s[0]=o,s[1]=o+n,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){var o=this._startTime;if(null!==o){var r=(e-o)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,h=this._propertyBindings,u=0,l=c.length;u!==l;++u)c[u].evaluate(a),h[u].accumulate(i,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.pause=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,i=this.loop,o=this._loopCount,r=!1;switch(i){case THREE.LoopOnce:if(-1===o&&(this.loopCount=0,this._setEndings(!0,!0,!1)),t>=n)t=n;else{if(!(t<0))break;t=0}this.clampWhenFinished?this.pause=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1});break;case THREE.LoopPingPong:r=!0;case THREE.LoopRepeat:if(-1===o&&(e>0?(o=0,this._setEndings(!0,0===this.repetitions,r)):this._setEndings(0===this.repetitions,!0,r)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,o+=Math.abs(a);var s=this.repetitions-o;if(s<0){this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});break}if(0===s){var c=e<0;this._setEndings(c,!c,r)}else this._setEndings(!1,!1,r);this._loopCount=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}if(i===THREE.LoopPingPong&&1==(1&o))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=THREE.ZeroSlopeEnding,i.endingEnd=THREE.ZeroSlopeEnding):(i.endingStart=e?this.zeroSlopeAtStart?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding,i.endingEnd=t?this.zeroSlopeAtEnd?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding)},_scheduleFading:function(e,t,n){var i=this._mixer,o=i.time,r=this._weightInterpolant;null===r&&(r=i._lendControlInterpolant(),this._weightInterpolant=r);var a=r.parameterPositions,s=r.sampleValues;return a[0]=o,s[0]=t,a[1]=o+e,s[1]=n,this}},Object.assign(THREE.AnimationMixer.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,o=i.length,r=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,h=c[s];void 0===h&&(h={},c[s]=h);for(var u=0;u!==o;++u){var l=i[u],d=l.name,p=h[d];if(void 0!==p)r[u]=p;else{if(void 0!==(p=r[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var m=t&&t._propertyBindings[u].binding.parsedPath;++(p=new THREE.PropertyMixer(THREE.PropertyBinding.create(n,d,m),l.ValueTypeName,l.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),r[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.name,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var o=e._propertyBindings,r=0,a=o.length;r!==a;++r){var s=o[r];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var o=t[n];0==--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,o=this._actionsByClip,r=o[t];if(void 0===r)r={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=r;else{var a=r.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),r.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var o=e._clip.name,r=this._actionsByClip,a=r[o],s=a.knownActions,c=s[s.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,s[h]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete r[o],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var o=t[n];0==--o.referenceCount&&this._removeInactiveBinding(o)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=n,t[n]=o},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=n,t[n]=o},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,o=i[t],r=this._bindings;void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,o=n.path,r=this._bindingsByRootAndName,a=r[i],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[o];e:{for(var h in a)break e;delete r[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=n,t[n]=o},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=n,t[n]=o},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new THREE.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=t[i];e.__cacheIndex=i,t[i]=e,o.__cacheIndex=n,t[n]=o},_controlInterpolantsResultBuffer:new Float32Array(1)}),THREE.JSONLoader=function(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.withCredentials=!1},THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,get statusDomElement(){return void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div")),console.warn("THREE.JSONLoader: .statusDomElement has been removed."),this._statusDomElement},load:function(e,t,n,i){var o=this,r=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(e),a=new THREE.XHRLoader(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var i=JSON.parse(n),a=i.metadata;if(void 0!==a){var s=a.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var c=o.parse(i,r);t(c.geometry,c.materials)},n,i)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var n=new THREE.Geometry,i=void 0!==e.scale?1/e.scale:1;if(function(t){function i(e,t){return e&1<<t}var o,r,a,s,c,h,u,l,d,p,m,E,f,v,g,_,b,T,y,R,x,w,H,I,L,C,M,A=e.faces,O=e.vertices,k=e.normals,S=e.colors,j=0;if(void 0!==e.uvs){for(o=0;o<e.uvs.length;o++)e.uvs[o].length&&j++;for(o=0;o<j;o++)n.faceVertexUvs[o]=[]}for(s=0,c=O.length;s<c;)(T=new THREE.Vector3).x=O[s++]*t,T.y=O[s++]*t,T.z=O[s++]*t,n.vertices.push(T);for(s=0,c=A.length;s<c;)if(p=A[s++],m=i(p,0),E=i(p,1),f=i(p,3),v=i(p,4),g=i(p,5),_=i(p,6),b=i(p,7),m){if(R=new THREE.Face3,R.a=A[s],R.b=A[s+1],R.c=A[s+3],x=new THREE.Face3,x.a=A[s+1],x.b=A[s+2],x.c=A[s+3],s+=4,E&&(d=A[s++],R.materialIndex=d,x.materialIndex=d),a=n.faces.length,f)for(o=0;o<j;o++)for(I=e.uvs[o],n.faceVertexUvs[o][a]=[],n.faceVertexUvs[o][a+1]=[],r=0;r<4;r++)C=I[2*(l=A[s++])],M=I[2*l+1],L=new THREE.Vector2(C,M),2!==r&&n.faceVertexUvs[o][a].push(L),0!==r&&n.faceVertexUvs[o][a+1].push(L);if(v&&(u=3*A[s++],R.normal.set(k[u++],k[u++],k[u]),x.normal.copy(R.normal)),g)for(o=0;o<4;o++)u=3*A[s++],H=new THREE.Vector3(k[u++],k[u++],k[u]),2!==o&&R.vertexNormals.push(H),0!==o&&x.vertexNormals.push(H);if(_&&(w=S[h=A[s++]],R.color.setHex(w),x.color.setHex(w)),b)for(o=0;o<4;o++)w=S[h=A[s++]],2!==o&&R.vertexColors.push(new THREE.Color(w)),0!==o&&x.vertexColors.push(new THREE.Color(w));n.faces.push(R),n.faces.push(x)}else{if(y=new THREE.Face3,y.a=A[s++],y.b=A[s++],y.c=A[s++],E&&(d=A[s++],y.materialIndex=d),a=n.faces.length,f)for(o=0;o<j;o++)for(I=e.uvs[o],n.faceVertexUvs[o][a]=[],r=0;r<3;r++)C=I[2*(l=A[s++])],M=I[2*l+1],L=new THREE.Vector2(C,M),n.faceVertexUvs[o][a].push(L);if(v&&(u=3*A[s++],y.normal.set(k[u++],k[u++],k[u])),g)for(o=0;o<3;o++)u=3*A[s++],H=new THREE.Vector3(k[u++],k[u++],k[u]),y.vertexNormals.push(H);if(_&&(h=A[s++],y.color.setHex(S[h])),b)for(o=0;o<3;o++)h=A[s++],y.vertexColors.push(new THREE.Color(S[h]));n.faces.push(y)}}(i),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,o=e.skinWeights.length;i<o;i+=t){var r=e.skinWeights[i],a=t>1?e.skinWeights[i+1]:0,s=t>2?e.skinWeights[i+2]:0,c=t>3?e.skinWeights[i+3]:0;n.skinWeights.push(new THREE.Vector4(r,a,s,c))}if(e.skinIndices)for(var i=0,o=e.skinIndices.length;i<o;i+=t){var h=e.skinIndices[i],u=t>1?e.skinIndices[i+1]:0,l=t>2?e.skinIndices[i+2]:0,d=t>3?e.skinIndices[i+3]:0;n.skinIndices.push(new THREE.Vector4(h,u,l,d))}n.bones=e.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")}(),function(t){if(void 0!==e.morphTargets)for(var i=0,o=e.morphTargets.length;i<o;i++){n.morphTargets[i]={},n.morphTargets[i].name=e.morphTargets[i].name,n.morphTargets[i].vertices=[];for(var r=n.morphTargets[i].vertices,a=e.morphTargets[i].vertices,s=0,c=a.length;s<c;s+=3){var h=new THREE.Vector3;h.x=a[s]*t,h.y=a[s+1]*t,h.z=a[s+2]*t,r.push(h)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var u=n.faces,l=e.morphColors[0].colors,i=0,o=u.length;i<o;i++)u[i].color.fromArray(l,3*i)}}(i),function(){var t=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var o=0;o<i.length;o++){var r=THREE.AnimationClip.parseAnimation(i[o],n.bones);r&&t.push(r)}if(n.morphTargets){var a=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(n.morphTargets,10);t=t.concat(a)}t.length>0&&(n.animations=t)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:n};var o=THREE.Loader.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:o}}},THREE.MTLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(e,t,n,i){var o=this,r=new THREE.XHRLoader(this.manager);r.setPath(this.path),r.load(e,function(e){t(o.parse(e))},n,i)},setPath:function(e){this.path=e},setBaseUrl:function(e){this.baseUrl=e},setCrossOrigin:function(e){this.crossOrigin=e},setMaterialOptions:function(e){this.materialOptions=e},parse:function(e){for(var t=e.split("\n"),n={},i=/\s+/,o={},r=0;r<t.length;r++){var a=t[r];if(0!==(a=a.trim()).length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),c=s>=0?a.substring(0,s):a;c=c.toLowerCase();var h=s>=0?a.substring(s+1):"";if(h=h.trim(),"newmtl"===c)n={name:h},o[h]=n;else if(n)if("ka"===c||"kd"===c||"ks"===c){var u=h.split(i,3);n[c]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else n[c]=h}}var l=new THREE.MTLLoader.MaterialCreator(this.baseUrl,this.materialOptions);return l.setCrossOrigin(this.crossOrigin),l.setManager(this.manager),l.setMaterials(o),l}},THREE.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setCrossOrigin:function(e){this.crossOrigin=e},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var n in e){var i=e[n],o={};t[n]=o;for(var r in i){var a=!0,s=i[r],c=r.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[1]&&(a=!1)}a&&(o[c]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this.materialsInfo[e],n={name:e,side:this.side};for(var i in t){var o=t[i];if(""!==o)switch(i.toLowerCase()){case"kd":n.color=(new THREE.Color).fromArray(o);break;case"ks":n.specular=(new THREE.Color).fromArray(o);break;case"map_kd":n.map=this.loadTexture(this.baseUrl+o),n.map.wrapS=this.wrap,n.map.wrapT=this.wrap;break;case"ns":n.shininess=parseFloat(o);break;case"d":o<1&&(n.opacity=o,n.transparent=!0);break;case"Tr":o>0&&(n.opacity=1-o,n.transparent=!0);break;case"map_bump":case"bump":if(n.bumpMap)break;n.bumpMap=this.loadTexture(this.baseUrl+o),n.bumpMap.wrapS=this.wrap,n.bumpMap.wrapT=this.wrap}}return this.materials[e]=new THREE.MeshPhongMaterial(n),this.materials[e]},loadTexture:function(e,t,n,i,o){var r,a=THREE.Loader.Handlers.get(e),s=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===a&&(a=new THREE.TextureLoader(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),r=a.load(e,n,i,o),void 0!==t&&(r.mapping=t),r}},THREE.EventDispatcher.prototype.apply(THREE.MTLLoader.prototype),THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.texturePath=""},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var o=this;new THREE.XHRLoader(o.manager).load(e,function(e){o.parse(JSON.parse(e),t)},n,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),i=this.parseImages(e.images,function(){void 0!==t&&t(a)}),o=this.parseTextures(e.textures,i),r=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,n,r);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new THREE.JSONLoader,i=new THREE.BufferGeometryLoader,o=0,r=e.length;o<r;o++){var a,s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new THREE[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new THREE[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new THREE[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new THREE[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new THREE[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":a=new THREE.DodecahedronGeometry(s.radius,s.detail);break;case"IcosahedronGeometry":a=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"OctahedronGeometry":a=new THREE.OctahedronGeometry(s.radius,s.detail);break;case"TetrahedronGeometry":a=new THREE.TetrahedronGeometry(s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new THREE[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new THREE[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new THREE[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":a=new THREE.LatheGeometry(s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":a=i.parse(s);break;case"Geometry":a=n.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new THREE.MaterialLoader;i.setTextures(t);for(var o=0,r=e.length;o<r;o++){var a=i.parse(e[o]);n[a.uuid]=a}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=THREE.AnimationClip.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){var n=this,i={};if(void 0!==e&&e.length>0){var o=new THREE.LoadingManager(t),r=new THREE.ImageLoader(o);r.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var c=e[a],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;i[c.uuid]=function(e){return n.manager.itemStart(e),r.load(e,function(){n.manager.itemEnd(e)})}(h)}}return i},parseTextures:function(e,t){function n(e){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),THREE[e])}var i={};if(void 0!==e)for(var o=0,r=e.length;o<r;o++){var a=e[o];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new THREE.Texture(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping)),void 0!==a.offset&&(s.offset=new THREE.Vector2(a.offset[0],a.offset[1])),void 0!==a.repeat&&(s.repeat=new THREE.Vector2(a.repeat[0],a.repeat[1])),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),Array.isArray(a.wrap)&&(s.wrapS=n(a.wrap[0]),s.wrapT=n(a.wrap[1])),i[a.uuid]=s}return i},parseObject:function(){var e=new THREE.Matrix4;return function(t,n,i){function o(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function r(e){if(void 0!==e)return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}var a;switch(t.type){case"Scene":a=new THREE.Scene;break;case"PerspectiveCamera":a=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":a=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":a=new THREE.AmbientLight(t.color,t.intensity);break;case"DirectionalLight":a=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":a=new THREE.PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":a=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=o(t.geometry),c=r(t.material);a=s.bones&&s.bones.length>0?new THREE.SkinnedMesh(s,c):new THREE.Mesh(s,c);break;case"LOD":a=new THREE.LOD;break;case"Line":a=new THREE.Line(o(t.geometry),r(t.material),t.mode);break;case"PointCloud":case"Points":a=new THREE.Points(o(t.geometry),r(t.material));break;case"Sprite":a=new THREE.Sprite(r(t.material));break;case"Group":a=new THREE.Group;break;default:a=new THREE.Object3D}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.children)for(var h in t.children)a.add(this.parseObject(t.children[h],n,i));if("LOD"===t.type)for(var u=t.levels,l=0;l<u.length;l++){var d=u[l];void 0!==(h=a.getObjectByProperty("uuid",d.object))&&a.addLevel(h,d.distance)}return a}}()},THREE.OBJLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}},THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(e,t,n,i){var o=this,r=new THREE.XHRLoader(o.manager);r.setPath(this.path),r.load(e,function(e){t(o.parse(e))},n,i)},setPath:function(e){this.path=e},setMaterials:function(e){this.materials=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var i=this.vertices,o=this.object.geometry.vertices;o.push(i[e+0]),o.push(i[e+1]),o.push(i[e+2]),o.push(i[t+0]),o.push(i[t+1]),o.push(i[t+2]),o.push(i[n+0]),o.push(i[n+1]),o.push(i[n+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0]),n.push(t[e+1]),n.push(t[e+2])},addNormal:function(e,t,n){var i=this.normals,o=this.object.geometry.normals;o.push(i[e+0]),o.push(i[e+1]),o.push(i[e+2]),o.push(i[t+0]),o.push(i[t+1]),o.push(i[t+2]),o.push(i[n+0]),o.push(i[n+1]),o.push(i[n+2])},addUV:function(e,t,n){var i=this.uvs,o=this.object.geometry.uvs;o.push(i[e+0]),o.push(i[e+1]),o.push(i[t+0]),o.push(i[t+1]),o.push(i[n+0]),o.push(i[n+1])},addUVLine:function(e){var t=this.uvs,n=this.object.geometry.uvs;n.push(t[e+0]),n.push(t[e+1])},addFace:function(e,t,n,i,o,r,a,s,c,h,u,l){var d,p=this.vertices.length,m=this.parseVertexIndex(e,p),E=this.parseVertexIndex(t,p),f=this.parseVertexIndex(n,p);if(void 0===i?this.addVertex(m,E,f):(d=this.parseVertexIndex(i,p),this.addVertex(m,E,d),this.addVertex(E,f,d)),void 0!==o){var v=this.uvs.length;m=this.parseUVIndex(o,v),E=this.parseUVIndex(r,v),f=this.parseUVIndex(a,v),void 0===i?this.addUV(m,E,f):(d=this.parseUVIndex(s,v),this.addUV(m,E,d),this.addUV(E,f,d))}if(void 0!==c){var g=this.normals.length;m=this.parseNormalIndex(c,g),E=c===h?m:this.parseNormalIndex(h,g),f=c===u?m:this.parseNormalIndex(u,g),void 0===i?this.addNormal(m,E,f):(d=this.parseNormalIndex(l,g),this.addNormal(m,E,d),this.addNormal(E,f,d))}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,o=0,r=e.length;o<r;o++)this.addVertexLine(this.parseVertexIndex(e[o],n));for(var a=0,r=t.length;a<r;a++)this.addUVLine(this.parseUVIndex(t[a],i))}};return e.startObject("",!1),e},parse:function(e){console.time("OBJLoader");var t=this._createParserState();-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var n=e.split("\n"),i="",o="",r="",a=[],s="function"==typeof"".trimLeft,c=0,h=n.length;c<h;c++)if(i=n[c],i=s?i.trimLeft():i.trim(),0!==i.length&&"#"!==(o=i.charAt(0)))if("v"===o)if(" "===(r=i.charAt(1))&&null!==(a=this.regexp.vertex_pattern.exec(i)))t.vertices.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));else if("n"===r&&null!==(a=this.regexp.normal_pattern.exec(i)))t.normals.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));else{if("t"!==r||null===(a=this.regexp.uv_pattern.exec(i)))throw new Error("Unexpected vertex/normal/uv line: '"+i+"'");t.uvs.push(parseFloat(a[1]),parseFloat(a[2]))}else if("f"===o)if(null!==(a=this.regexp.face_vertex_uv_normal.exec(i)))t.addFace(a[1],a[4],a[7],a[10],a[2],a[5],a[8],a[11],a[3],a[6],a[9],a[12]);else if(null!==(a=this.regexp.face_vertex_uv.exec(i)))t.addFace(a[1],a[3],a[5],a[7],a[2],a[4],a[6],a[8]);else if(null!==(a=this.regexp.face_vertex_normal.exec(i)))t.addFace(a[1],a[3],a[5],a[7],void 0,void 0,void 0,void 0,a[2],a[4],a[6],a[8]);else{if(null===(a=this.regexp.face_vertex.exec(i)))throw new Error("Unexpected face line: '"+i+"'");t.addFace(a[1],a[2],a[3],a[4])}else if("l"===o){var u=i.substring(1).trim().split(" "),l=[],d=[];if(-1===i.indexOf("/"))l=u;else for(var p=0,m=u.length;p<m;p++){var E=u[p].split("/");""!==E[0]&&l.push(E[0]),""!==E[1]&&d.push(E[1])}t.addLineGeometry(l,d)}else if(null!==(a=this.regexp.object_pattern.exec(i))){var f=(" "+a[0].substr(1).trim()).substr(1);t.startObject(f)}else if(this.regexp.material_use_pattern.test(i))t.object.startMaterial(i.substring(7).trim(),t.materialLibraries);else if(this.regexp.material_library_pattern.test(i))t.materialLibraries.push(i.substring(7).trim());else{if(null===(a=this.regexp.smoothing_pattern.exec(i))){if("\0"===i)continue;throw new Error("Unexpected line: '"+i+"'")}var v=a[1].trim().toLowerCase();t.object.smooth="1"===v||"on"===v,(L=t.object.currentMaterial())&&(L.smooth=t.object.smooth)}t.finalize();var g=new THREE.Group;g.materialLibraries=[].concat(t.materialLibraries);for(var c=0,h=t.objects.length;c<h;c++){var _=t.objects[c],b=_.geometry,T=_.materials,y="Line"===b.type;if(0!==b.vertices.length){var R=new THREE.BufferGeometry;R.addAttribute("position",new THREE.BufferAttribute(new Float32Array(b.vertices),3)),b.normals.length>0?R.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(b.normals),3)):R.computeVertexNormals(),b.uvs.length>0&&R.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(b.uvs),2));for(var x=[],w=0,H=T.length;w<H;w++){var I=T[w],L=void 0;if(null!==this.materials&&(L=this.materials.create(I.name),y&&L&&!(L instanceof THREE.LineBasicMaterial))){var C=new THREE.LineBasicMaterial;C.copy(L),L=C}L||((L=y?new THREE.LineBasicMaterial:new THREE.MeshPhongMaterial).name=I.name),L.shading=I.smooth?THREE.SmoothShading:THREE.FlatShading,x.push(L)}var M;if(x.length>1){for(var w=0,H=T.length;w<H;w++){I=T[w];R.addGroup(I.groupStart,I.groupCount,w)}var A=new THREE.MultiMaterial(x);M=y?new THREE.LineSegments(R,A):new THREE.Mesh(R,A)}else M=y?new THREE.LineSegments(R,x[0]):new THREE.Mesh(R,x[0]);M.name=_.name,g.add(M)}}return console.timeEnd("OBJLoader"),g}},THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*k.autoRotateSpeed}function i(){return Math.pow(.95,k.zoomSpeed)}function o(e){V.theta-=e}function r(e){V.phi-=e}function a(e){k.object instanceof THREE.PerspectiveCamera?U/=e:k.object instanceof THREE.OrthographicCamera?(k.object.zoom=Math.max(k.minZoom,Math.min(k.maxZoom,k.object.zoom*e)),k.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),k.enableZoom=!1)}function s(e){k.object instanceof THREE.PerspectiveCamera?U*=e:k.object instanceof THREE.OrthographicCamera?(k.object.zoom=Math.max(k.minZoom,Math.min(k.maxZoom,k.object.zoom/e)),k.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),k.enableZoom=!1)}function c(e){z.set(e.clientX,e.clientY)}function h(e){q.set(e.clientX,e.clientY)}function u(e){Y.set(e.clientX,e.clientY)}function l(e){Z.set(e.clientX,e.clientY),$.subVectors(Z,z);var t=k.domElement===document?k.domElement.body:k.domElement;o(2*Math.PI*$.x/t.clientWidth*k.rotateSpeed),r(2*Math.PI*$.y/t.clientHeight*k.rotateSpeed),z.copy(Z),k.update()}function d(e){K.set(e.clientX,e.clientY),Q.subVectors(K,q),Q.y>0?a(i()):Q.y<0&&s(i()),q.copy(K),k.update()}function p(e){X.set(e.clientX,e.clientY),J.subVectors(X,Y),ne(J.x,J.y),Y.copy(X),k.update()}function m(e){}function E(e){var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?s(i()):t<0&&a(i()),k.update()}function f(e){switch(e.keyCode){case k.keys.UP:ne(0,k.keyPanSpeed),k.update();break;case k.keys.BOTTOM:ne(0,-k.keyPanSpeed),k.update();break;case k.keys.LEFT:ne(k.keyPanSpeed,0),k.update();break;case k.keys.RIGHT:ne(-k.keyPanSpeed,0),k.update()}}function v(e){z.set(e.touches[0].pageX,e.touches[0].pageY)}function g(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);q.set(0,i)}function _(e){Y.set(e.touches[0].pageX,e.touches[0].pageY)}function b(e){Z.set(e.touches[0].pageX,e.touches[0].pageY),$.subVectors(Z,z);var t=k.domElement===document?k.domElement.body:k.domElement;o(2*Math.PI*$.x/t.clientWidth*k.rotateSpeed),r(2*Math.PI*$.y/t.clientHeight*k.rotateSpeed),z.copy(Z),k.update()}function T(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);K.set(0,o),Q.subVectors(K,q),Q.y>0?s(i()):Q.y<0&&a(i()),q.copy(K),k.update()}function y(e){X.set(e.touches[0].pageX,e.touches[0].pageY),J.subVectors(X,Y),ne(J.x,J.y),Y.copy(X),k.update()}function R(e){}function x(e){if(!1!==k.enabled){if(e.preventDefault(),e.button===k.mouseButtons.ORBIT){if(!1===k.enableRotate)return;c(e),B=P.ROTATE}else if(e.button===k.mouseButtons.ZOOM){if(!1===k.enableZoom)return;h(e),B=P.DOLLY}else if(e.button===k.mouseButtons.PAN){if(!1===k.enablePan)return;u(e),B=P.PAN}B!==P.NONE&&(document.addEventListener("mousemove",w,!1),document.addEventListener("mouseup",H,!1),document.addEventListener("mouseout",H,!1),k.dispatchEvent(j))}}function w(e){if(!1!==k.enabled)if(e.preventDefault(),B===P.ROTATE){if(!1===k.enableRotate)return;l(e)}else if(B===P.DOLLY){if(!1===k.enableZoom)return;d(e)}else if(B===P.PAN){if(!1===k.enablePan)return;p(e)}}function H(e){!1!==k.enabled&&(m(e),document.removeEventListener("mousemove",w,!1),document.removeEventListener("mouseup",H,!1),document.removeEventListener("mouseout",H,!1),k.dispatchEvent(D),B=P.NONE)}function I(e){!1!==k.enabled&&!1!==k.enableZoom&&B===P.NONE&&(e.preventDefault(),e.stopPropagation(),E(e),k.dispatchEvent(j),k.dispatchEvent(D))}function L(e){!1!==k.enabled&&!1!==k.enableKeys&&!1!==k.enablePan&&f(e)}function C(e){if(!1!==k.enabled){switch(e.touches.length){case 1:if(!1===k.enableRotate)return;v(e),B=P.TOUCH_ROTATE;break;case 2:if(!1===k.enableZoom)return;g(e),B=P.TOUCH_DOLLY;break;case 3:if(!1===k.enablePan)return;_(e),B=P.TOUCH_PAN;break;default:B=P.NONE}B!==P.NONE&&k.dispatchEvent(j)}}function M(e){if(!1!==k.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===k.enableRotate)return;if(B!==P.TOUCH_ROTATE)return;b(e);break;case 2:if(!1===k.enableZoom)return;if(B!==P.TOUCH_DOLLY)return;T(e);break;case 3:if(!1===k.enablePan)return;if(B!==P.TOUCH_PAN)return;y(e);break;default:B=P.NONE}}function A(e){!1!==k.enabled&&(R(e),k.dispatchEvent(D),B=P.NONE)}function O(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return phi},this.getAzimuthalAngle=function(){return theta},this.reset=function(){k.target.copy(k.target0),k.object.position.copy(k.position0),k.object.zoom=k.zoom0,k.object.updateProjectionMatrix(),k.dispatchEvent(S),k.update(),B=P.NONE},this.update=function(){var t=new THREE.Vector3,i=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),r=i.clone().inverse(),a=new THREE.Vector3,s=new THREE.Quaternion;return function(){var e=k.object.position;return t.copy(e).sub(k.target),t.applyQuaternion(i),F.setFromVector3(t),k.autoRotate&&B===P.NONE&&o(n()),F.theta+=V.theta,F.phi+=V.phi,F.theta=Math.max(k.minAzimuthAngle,Math.min(k.maxAzimuthAngle,F.theta)),F.phi=Math.max(k.minPolarAngle,Math.min(k.maxPolarAngle,F.phi)),F.makeSafe(),F.radius*=U,F.radius=Math.max(k.minDistance,Math.min(k.maxDistance,F.radius)),k.target.add(W),t.setFromSpherical(F),t.applyQuaternion(r),e.copy(k.target).add(t),k.object.lookAt(k.target),!0===k.enableDamping?(V.theta*=1-k.dampingFactor,V.phi*=1-k.dampingFactor):V.set(0,0,0),U=1,W.set(0,0,0),!!(G||a.distanceToSquared(k.object.position)>N||8*(1-s.dot(k.object.quaternion))>N)&&(k.dispatchEvent(S),a.copy(k.object.position),s.copy(k.object.quaternion),G=!1,!0)}}(),this.dispose=function(){k.domElement.removeEventListener("contextmenu",O,!1),k.domElement.removeEventListener("mousedown",x,!1),k.domElement.removeEventListener("mousewheel",I,!1),k.domElement.removeEventListener("MozMousePixelScroll",I,!1),k.domElement.removeEventListener("touchstart",C,!1),k.domElement.removeEventListener("touchend",A,!1),k.domElement.removeEventListener("touchmove",M,!1),document.removeEventListener("mousemove",w,!1),document.removeEventListener("mouseup",H,!1),document.removeEventListener("mouseout",H,!1),window.removeEventListener("keydown",L,!1)};var k=this,S={type:"change"},j={type:"start"},D={type:"end"},P={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},B=P.NONE,N=1e-6,F=new THREE.Spherical,V=new THREE.Spherical,U=1,W=new THREE.Vector3,G=!1,z=new THREE.Vector2,Z=new THREE.Vector2,$=new THREE.Vector2,Y=new THREE.Vector2,X=new THREE.Vector2,J=new THREE.Vector2,q=new THREE.Vector2,K=new THREE.Vector2,Q=new THREE.Vector2,ee=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),W.add(e)}}(),te=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),W.add(e)}}(),ne=function(){var e=new THREE.Vector3;return function(t,n){var i=k.domElement===document?k.domElement.body:k.domElement;if(k.object instanceof THREE.PerspectiveCamera){var o=k.object.position;e.copy(o).sub(k.target);var r=e.length();r*=Math.tan(k.object.fov/2*Math.PI/180),ee(2*t*r/i.clientHeight,k.object.matrix),te(2*n*r/i.clientHeight,k.object.matrix)}else k.object instanceof THREE.OrthographicCamera?(ee(t*(k.object.right-k.object.left)/k.object.zoom/i.clientWidth,k.object.matrix),te(n*(k.object.top-k.object.bottom)/k.object.zoom/i.clientHeight,k.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),k.enablePan=!1)}}();k.domElement.addEventListener("contextmenu",O,!1),k.domElement.addEventListener("mousedown",x,!1),k.domElement.addEventListener("mousewheel",I,!1),k.domElement.addEventListener("MozMousePixelScroll",I,!1),k.domElement.addEventListener("touchstart",C,!1),k.domElement.addEventListener("touchend",A,!1),k.domElement.addEventListener("touchmove",M,!1),window.addEventListener("keydown",L,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=e}}});var THREEx=THREEx||{};THREEx.DomEvents=function(e,t){this._camera=e||null,this._domElement=t||document,this._raycaster=new THREE.Raycaster,this._selected=null,this._boundObjs={};var n=this;this._$onClick=function(){n._onClick.apply(n,arguments)},this._$onDblClick=function(){n._onDblClick.apply(n,arguments)},this._$onMouseMove=function(){n._onMouseMove.apply(n,arguments)},this._$onMouseDown=function(){n._onMouseDown.apply(n,arguments)},this._$onMouseUp=function(){n._onMouseUp.apply(n,arguments)},this._$onTouchMove=function(){n._onTouchMove.apply(n,arguments)},this._$onTouchStart=function(){n._onTouchStart.apply(n,arguments)},this._$onTouchEnd=function(){n._onTouchEnd.apply(n,arguments)},this._$onContextmenu=function(){n._onContextmenu.apply(n,arguments)},this._domElement.addEventListener("click",this._$onClick,!1),this._domElement.addEventListener("dblclick",this._$onDblClick,!1),this._domElement.addEventListener("mousemove",this._$onMouseMove,!1),this._domElement.addEventListener("mousedown",this._$onMouseDown,!1),this._domElement.addEventListener("mouseup",this._$onMouseUp,!1),this._domElement.addEventListener("touchmove",this._$onTouchMove,!1),this._domElement.addEventListener("touchstart",this._$onTouchStart,!1),this._domElement.addEventListener("touchend",this._$onTouchEnd,!1),this._domElement.addEventListener("contextmenu",this._$onContextmenu,!1)},THREEx.DomEvents.prototype.destroy=function(){this._domElement.removeEventListener("click",this._$onClick,!1),this._domElement.removeEventListener("dblclick",this._$onDblClick,!1),this._domElement.removeEventListener("mousemove",this._$onMouseMove,!1),this._domElement.removeEventListener("mousedown",this._$onMouseDown,!1),this._domElement.removeEventListener("mouseup",this._$onMouseUp,!1),this._domElement.removeEventListener("touchmove",this._$onTouchMove,!1),this._domElement.removeEventListener("touchstart",this._$onTouchStart,!1),this._domElement.removeEventListener("touchend",this._$onTouchEnd,!1),this._domElement.removeEventListener("contextmenu",this._$onContextmenu,!1)},THREEx.DomEvents.eventNames=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu","touchstart","touchend"],THREEx.DomEvents.prototype._getRelativeMouseXY=function(e){var t=e.target||e.srcElement;3===t.nodeType&&(t=t.parentNode);var n={x:0,y:0},i=t,o=getComputedStyle(i,null);n.y+=parseInt(o.getPropertyValue("padding-top"),10),n.x+=parseInt(o.getPropertyValue("padding-left"),10);do{n.x+=i.offsetLeft,n.y+=i.offsetTop,o=getComputedStyle(i,null),n.x+=parseInt(o.getPropertyValue("border-left-width"),10),n.y+=parseInt(o.getPropertyValue("border-top-width"),10)}while(i=i.offsetParent);var r={width:t===window?window.innerWidth:t.offsetWidth,height:t===window?window.innerHeight:t.offsetHeight};return{x:+(e.pageX-n.x)/r.width*2-1,y:-(e.pageY-n.y)/r.height*2+1}},THREEx.DomEvents.prototype._objectCtxInit=function(e){e._3xDomEvent={}},THREEx.DomEvents.prototype._objectCtxDeinit=function(e){delete e._3xDomEvent},THREEx.DomEvents.prototype._objectCtxIsInit=function(e){return!!e._3xDomEvent},THREEx.DomEvents.prototype._objectCtxGet=function(e){return e._3xDomEvent},THREEx.DomEvents.prototype.camera=function(e){return e&&(this._camera=e),this._camera},THREEx.DomEvents.prototype.bind=function(e,t,n,i){console.assert(-1!==THREEx.DomEvents.eventNames.indexOf(t),"not available events:"+t),this._objectCtxIsInit(e)||this._objectCtxInit(e);var o=this._objectCtxGet(e);o[t+"Handlers"]||(o[t+"Handlers"]=[]),o[t+"Handlers"].push({callback:n,useCapture:i}),void 0===this._boundObjs[t]&&(this._boundObjs[t]=[]),this._boundObjs[t].push(e)},THREEx.DomEvents.prototype.addEventListener=THREEx.DomEvents.prototype.bind,THREEx.DomEvents.prototype.unbind=function(e,t,n,i){console.assert(-1!==THREEx.DomEvents.eventNames.indexOf(t),"not available events:"+t),this._objectCtxIsInit(e)||this._objectCtxInit(e);var o=this._objectCtxGet(e);o[t+"Handlers"]||(o[t+"Handlers"]=[]);for(var r=o[t+"Handlers"],a=0;a<r.length;a++){var s=r[a];if(n==s.callback&&i==s.useCapture){r.splice(a,1);break}}var c=this._boundObjs[t].indexOf(e);console.assert(-1!==c),this._boundObjs[t].splice(c,1)},THREEx.DomEvents.prototype.removeEventListener=THREEx.DomEvents.prototype.unbind,THREEx.DomEvents.prototype._bound=function(e,t){var n=this._objectCtxGet(t);return!!n&&!!n[e+"Handlers"]},THREEx.DomEvents.prototype._onMove=function(e,t,n,i){var o=this._boundObjs[e];if(void 0!==o&&0!==o.length){var r=new THREE.Vector2;r.set(t,n),this._raycaster.setFromCamera(r,this._camera);var a=this._raycaster.intersectObjects(o),s=this._selected;if(a.length>0){var c,h,u,l=a[0],d=l.object;this._selected=d,u=this._bound("mousemove",d),s!=d&&(c=this._bound("mouseover",d),h=s&&this._bound("mouseout",s))}else h=s&&this._bound("mouseout",s),this._selected=null;u&&this._notify("mousemove",d,i,l),c&&this._notify("mouseover",d,i,l),h&&this._notify("mouseout",s,i,l)}},THREEx.DomEvents.prototype._onEvent=function(e,t,n,i){var o=this._boundObjs[e];if(void 0!==o&&0!==o.length){var r=new THREE.Vector2;r.set(t,n),this._raycaster.setFromCamera(r,this._camera);var a=this._raycaster.intersectObjects(o,!0);if(0!==a.length){for(var s=a[0],c=s.object,h=this._objectCtxGet(c),u=c.parent;void 0===h&&u;)h=this._objectCtxGet(u),u=u.parent;h&&this._notify(e,c,i,s)}}},THREEx.DomEvents.prototype._notify=function(e,t,n,i){var o=this._objectCtxGet(t),r=o?o[e+"Handlers"]:null;if(console.assert(4===arguments.length),o&&r&&0!==r.length)for(var r=o[e+"Handlers"],a=0;a<r.length;a++){var s=r[a],c=!0;s.callback({type:e,target:t,origDomEvent:n,intersect:i,stopPropagation:function(){c=!1}}),c&&(!1===s.useCapture&&t.parent&&this._notify(e,t.parent,n,i))}else t.parent&&this._notify(e,t.parent,n,i)},THREEx.DomEvents.prototype._onMouseDown=function(e){return this._onMouseEvent("mousedown",e)},THREEx.DomEvents.prototype._onMouseUp=function(e){return this._onMouseEvent("mouseup",e)},THREEx.DomEvents.prototype._onMouseEvent=function(e,t){var n=this._getRelativeMouseXY(t);this._onEvent(e,n.x,n.y,t)},THREEx.DomEvents.prototype._onMouseMove=function(e){var t=this._getRelativeMouseXY(e);this._onMove("mousemove",t.x,t.y,e),this._onMove("mouseover",t.x,t.y,e),this._onMove("mouseout",t.x,t.y,e)},THREEx.DomEvents.prototype._onClick=function(e){this._onMouseEvent("click",e)},THREEx.DomEvents.prototype._onDblClick=function(e){this._onMouseEvent("dblclick",e)},THREEx.DomEvents.prototype._onContextmenu=function(e){this._onMouseEvent("contextmenu",e)},THREEx.DomEvents.prototype._onTouchStart=function(e){return this._onTouchEvent("touchstart",e)},THREEx.DomEvents.prototype._onTouchEnd=function(e){return this._onTouchEvent("touchend",e)},THREEx.DomEvents.prototype._onTouchMove=function(e){if(1==e.touches.length){e.preventDefault();var t=+e.touches[0].pageX/window.innerWidth*2-1,n=-e.touches[0].pageY/window.innerHeight*2+1;this._onMove("mousemove",t,n,e),this._onMove("mouseover",t,n,e),this._onMove("mouseout",t,n,e)}},THREEx.DomEvents.prototype._onTouchEvent=function(e,t){if(1==t.touches.length){t.preventDefault();var n=+t.touches[0].pageX/window.innerWidth*2-1,i=-t.touches[0].pageY/window.innerHeight*2+1;this._onEvent(e,n,i,t)}};var TWEEN=TWEEN||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},update:function(t,n){if(0===e.length)return!1;var i=0;for(t=void 0!==t?t:TWEEN.now();i<e.length;)e[i].update(t)||n?i++:e.splice(i,1);return!0}}}();(function(){void 0===this.window&&void 0!==this.process?TWEEN.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e3}:void 0!==this.window&&void 0!==window.performance&&void 0!==window.performance.now?TWEEN.now=window.performance.now.bind(window.performance):void 0!==Date.now?TWEEN.now=Date.now:TWEEN.now=function(){return(new Date).getTime()}}).bind(this)(),TWEEN.Tween=function(e){var t,n=e,i={},o={},r={},a=1e3,s=0,c=!1,h=!1,u=!1,l=0,d=null,p=TWEEN.Easing.Linear.None,m=TWEEN.Interpolation.Linear,E=[],f=null,v=!1,g=null,_=null,b=null;for(var T in e)i[T]=parseFloat(e[T],10);this.to=function(e,t){return void 0!==t&&(a=t),o=e,this},this.start=function(e){TWEEN.add(this),h=!0,v=!1,d=void 0!==e?e:TWEEN.now(),d+=l;for(var t in o){if(o[t]instanceof Array){if(0===o[t].length)continue;o[t]=[n[t]].concat(o[t])}void 0!==i[t]&&(i[t]=n[t],i[t]instanceof Array==!1&&(i[t]*=1),r[t]=i[t]||0)}return this},this.stop=function(){return h?(TWEEN.remove(this),h=!1,null!==b&&b.call(n),this.stopChainedTweens(),this):this},this.end=function(){return this.update(d+a),this},this.stopChainedTweens=function(){for(var e=0,t=E.length;e<t;e++)E[e].stop()},this.delay=function(e){return l=e,this},this.repeat=function(e){return s=e,this},this.repeatDelay=function(e){return t=e,this},this.yoyo=function(e){return c=e,this},this.easing=function(e){return p=e,this},this.interpolation=function(e){return m=e,this},this.chain=function(){return E=arguments,this},this.onStart=function(e){return f=e,this},this.onUpdate=function(e){return g=e,this},this.onComplete=function(e){return _=e,this},this.onStop=function(e){return b=e,this},this.update=function(e){var h,b,T;if(e<d)return!0;!1===v&&(null!==f&&f.call(n),v=!0),T=p(b=(b=(e-d)/a)>1?1:b);for(h in o)if(void 0!==i[h]){var y=i[h]||0,R=o[h];R instanceof Array?n[h]=m(R,T):("string"==typeof R&&(R="+"===R.charAt(0)||"-"===R.charAt(0)?y+parseFloat(R,10):parseFloat(R,10)),"number"==typeof R&&(n[h]=y+(R-y)*T))}if(null!==g&&g.call(n,T),1===b){if(s>0){isFinite(s)&&s--;for(h in r){if("string"==typeof o[h]&&(r[h]=r[h]+parseFloat(o[h],10)),c){var x=r[h];r[h]=o[h],o[h]=x}i[h]=r[h]}return c&&(u=!u),d=void 0!==t?e+t:e+l,!0}null!==_&&_.call(n);for(var w=0,H=E.length;w<H;w++)E[w].start(d+a);return!1}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=TWEEN.Interpolation.Utils.Linear;return t<0?r(e[0],e[1],i):t>1?r(e[n],e[n-1],n-i):r(e[o],e[o+1>n?n:o+1],i-o)},Bezier:function(e,t){for(var n=0,i=e.length-1,o=Math.pow,r=TWEEN.Interpolation.Utils.Bernstein,a=0;a<=i;a++)n+=o(1-t,i-a)*o(t,a)*e[a]*r(i,a);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(o=Math.floor(i=n*(1+t))),r(e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n],i-o)):t<0?e[0]-(r(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(r(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):r(e[o?o-1:0],e[o],e[n<o+1?n:o+1],e[n<o+2?n:o+2],i-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=TWEEN.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var i=t;i>1;i--)n*=i;return e[t]=n,n}}(),CatmullRom:function(e,t,n,i,o){var r=.5*(n-e),a=.5*(i-t),s=o*o;return(2*t-2*n+r+a)*(o*s)+(-3*t+3*n-2*r-a)*s+r*o+t}}},function(e){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==e&&(e.TWEEN=TWEEN)}(this);